<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Steel Column Flexural Buckling - EC3</title>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BFVZQQ2LYN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BFVZQQ2LYN');
  </script>

  <!-- Centralized CSS -->
  <link rel="stylesheet" href="../assets/css/common.css">
  <link rel="stylesheet" href="../assets/css/forms.css">
  <link rel="stylesheet" href="../assets/css/components.css">
  <!-- Note: report-print.css NOT loaded - using custom print CSS below -->

  <!-- Tailwind CSS -->
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Print CSS for Flexural Buckling Report -->
  <style>
    @media print {
      /* ===== PAGE SETUP ===== */
      @page {
        size: A4;
        margin: 25mm 25mm 25mm 31.7mm;
      }

      /* ===== HIDE EVERYTHING EXCEPT REPORT ===== */
      body * {
        visibility: hidden;
      }

      /* ===== SHOW ONLY THE REPORT ===== */
      #results,
      #results *,
      #detailed-report,
      #detailed-report *,
      .report-content,
      .report-content * {
        visibility: visible !important;
      }

      /* Override .hidden class */
      #detailed-report.hidden {
        display: block !important;
        visibility: visible !important;
      }

      /* ===== POSITIONING ===== */
      body {
        background: white !important;
        margin: 0 !important;
        padding: 0 !important;
      }

      #results {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        background: white !important;
        padding: 15mm 20mm !important;  /* Top/Bottom: 15mm, Left/Right: 20mm */
        margin: 0 !important;
      }

      #results > .bg-gray-700 {
        background: white !important;
        padding: 0 !important;
        margin: 0 !important;
        border: none !important;
      }

      #detailed-report {
        background: white !important;
        padding: 0 !important;
        margin: 0 !important;
      }

      .report-content {
        background: white !important;
        color: black !important;
        padding: 0 !important;
        margin: 0 !important;
      }

      /* ===== HIDE BUTTONS AND UI ELEMENTS ===== */
      button,
      .print\:hidden,
      #results > .bg-gray-700 > div.flex {
        display: none !important;
        visibility: hidden !important;
      }

      /* ===== TYPOGRAPHY ===== */
      .report-content h1 {
        font-size: 20pt !important;
        color: black !important;
        page-break-after: avoid;
      }

      .report-content h2 {
        font-size: 16pt !important;
        page-break-after: avoid;
      }

      .report-content h3 {
        font-size: 14pt !important;
        page-break-after: avoid;
      }

      /* ===== COLORS FOR PRINT ===== */
      .text-blue-900, .text-blue-800, .text-blue-700 {
        color: #1e3a8a !important;
      }

      .text-green-900, .text-green-700 {
        color: #14532d !important;
      }

      .text-red-900, .text-red-700 {
        color: #7f1d1d !important;
      }

      .text-orange-600 {
        color: #ea580c !important;
      }

      .text-gray-900, .text-gray-800 {
        color: #111827 !important;
      }

      .text-gray-600 {
        color: #4b5563 !important;
      }

      .text-gray-500 {
        color: #6b7280 !important;
      }

      /* ===== BACKGROUNDS ===== */
      .bg-blue-100 {
        background: #dbeafe !important;
      }

      .bg-orange-100 {
        background: #ffedd5 !important;
      }

      .bg-gray-50 {
        background: #f9fafb !important;
      }

      .bg-blue-50 {
        background: #eff6ff !important;
      }

      /* ===== BORDERS ===== */
      .border-blue-400 {
        border-color: #60a5fa !important;
      }

      .border-orange-400 {
        border-color: #fb923c !important;
      }

      .border-gray-300 {
        border-color: #d1d5db !important;
      }

      .border-blue-500 {
        border-color: #3b82f6 !important;
      }

      /* ===== PAGE BREAKS ===== */
      .page-break-before {
        page-break-before: always !important;
      }

      .page-break-avoid {
        page-break-inside: avoid !important;
      }

      /* ===== ENSURE PROPER DISPLAY TYPES ===== */
      .grid {
        display: grid !important;
      }

      .flex {
        display: flex !important;
      }

      /* But hide flex containers that are UI elements */
      #results > .bg-gray-700 > div.flex {
        display: none !important;
      }
    }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans min-h-screen flex flex-col items-center p-4">
  <main class="main-container">
    <!-- Compact Header -->
    <div class="flex justify-between items-center mb-2">
      <div class="flex gap-2 items-center">
        <button id="save-json-btn" class="px-2 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded transition flex items-center gap-1">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />
          </svg>
          Save
        </button>
        <button id="load-json-btn" class="px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition flex items-center gap-1">
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
          </svg>
          Load
        </button>
        <input type="file" id="load-json-input" accept=".json" class="hidden">
      </div>
      <h1 class="text-xl font-bold text-white">Steel Column Flexural Buckling</h1>
      <a href="../index.html" class="text-blue-400 hover:text-blue-300 text-xs transition whitespace-nowrap">
        ‚Üê Back to Tools
      </a>
    </div>

    <p class="text-center mb-1 text-xs text-gray-400">Eurocode 3-1-1 Section 6.3.1 | Fire design per EC3-1-2 | Section classification per EN 1993-1-1 Table 5.2</p>
    <p class="text-xs text-yellow-500 text-center mb-2">‚ö†Ô∏è Positive loads = compression</p>

    <!-- Main Form -->
    <form id="buckling-form" class="space-y-2">

      <!-- Calculation Description - Collapsible -->
      <div class="bg-gray-800 rounded p-2">
        <h2 class="text-sm font-semibold text-white cursor-pointer flex items-center gap-1" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('span').textContent = this.nextElementSibling.classList.contains('hidden') ? '‚ñ∂' : '‚ñº';">
          <span>‚ñ∂</span> <span class="text-xs">Calculation Description (Optional - click to expand)</span>
        </h2>
        <textarea
          id="description"
          class="hidden w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 mt-2 focus:outline-none focus:border-cyan-500 text-xs"
          rows="2"
          placeholder="Enter a description for this calculation..."></textarea>
      </div>

      <!-- Compact Grid Layout: Section, Lengths, Material, Loads -->
      <div class="bg-gray-800 rounded-lg p-3">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">

          <!-- LEFT COLUMN -->
          <div class="space-y-3">
            <!-- Steel Section Selection -->
            <div>
              <h2 class="text-base font-semibold text-white mb-1.5">Steel Section</h2>
              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label for="profile-type" class="block text-xs font-medium text-gray-300 mb-1">Profile Type</label>
                  <select
                    id="profile-type"
                    class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500"
                    required>
                    <option value="">-- Select --</option>
                    <option value="hea">HEA</option>
                    <option value="heb">HEB</option>
                    <option value="hem">HEM</option>
                    <option value="ipe">IPE</option>
                    <option value="hrhs">HRHS</option>
                    <option value="hshs">HSHS</option>
                    <option value="hchs">HCHS</option>
                    <option value="crhs">CRHS</option>
                    <option value="cshs">CSHS</option>
                    <option value="cchs">CCHS</option>
                  </select>
                </div>
                <div>
                  <label for="profile-name" class="block text-xs font-medium text-gray-300 mb-1">Profile Size</label>
                  <select
                    id="profile-name"
                    class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500"
                    required
                    disabled>
                    <option value="">-- Select type first --</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Buckling Lengths -->
            <div>
              <h2 class="text-base font-semibold text-white mb-1.5">Buckling Lengths</h2>
              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label for="Ly" class="block text-xs font-medium text-gray-300 mb-1">
                    L<sub>y</sub> (m)
                  </label>
                  <input
                    type="text"
                    id="Ly"
                    class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500 font-mono"
                    value="3.5"
                    placeholder="e.g. 3.5"
                    required>
                  <p class="text-xs text-gray-400 mt-0.5">y-axis</p>
                  <div id="Ly-calculated" class="calculated-value hidden"></div>
                </div>
                <div>
                  <label for="Lz" class="block text-xs font-medium text-gray-300 mb-1">
                    L<sub>z</sub> (m)
                  </label>
                  <input
                    type="text"
                    id="Lz"
                    class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500 font-mono"
                    value="3.5"
                    placeholder="e.g. 3.5"
                    required>
                  <p class="text-xs text-gray-400 mt-0.5">z-axis</p>
                  <div id="Lz-calculated" class="calculated-value hidden"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- RIGHT COLUMN -->
          <div class="space-y-3">
            <!-- Material Properties -->
            <div>
              <h2 class="text-base font-semibold text-white mb-1.5">Material Properties</h2>
              <div class="grid grid-cols-3 gap-3">
                <div>
                  <label for="steel-grade" class="block text-xs font-medium text-gray-300 mb-1">Grade</label>
                  <select
                    id="steel-grade"
                    class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500"
                    required>
                    <option value="S235">S235</option>
                    <option value="S275">S275</option>
                    <option value="S355" selected>S355</option>
                    <option value="S420">S420</option>
                    <option value="S460">S460</option>
                  </select>
                </div>
                <div>
                  <label for="fy" class="block text-xs font-medium text-gray-300 mb-1">
                    f<sub>y</sub> (MPa)
                  </label>
                  <input
                    type="number"
                    id="fy"
                    class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500 font-mono"
                    value="355"
                    min="200"
                    max="500"
                    required>
                </div>
                <div>
                  <label for="gamma-M1" class="block text-xs font-medium text-gray-300 mb-1">
                    Œ≥<sub>M1</sub>
                  </label>
                  <input
                    type="number"
                    id="gamma-M1"
                    class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500 font-mono"
                    value="1.05"
                    min="0.9"
                    max="1.5"
                    step="0.01"
                    required>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Section Properties Display - Full Width -->
        <div id="section-properties" class="mt-2 p-2 bg-gray-700 rounded hidden">
          <h3 class="text-xs font-semibold text-cyan-400 mb-1">Section Properties</h3>
          <div class="grid grid-cols-4 md:grid-cols-8 gap-x-4 gap-y-1 text-xs">
            <div><span class="text-gray-400">A:</span> <span id="prop-A" class="text-white font-mono">-</span> cm¬≤</div>
            <div><span class="text-gray-400">I<sub>y</sub>:</span> <span id="prop-Iy" class="text-white font-mono">-</span> cm‚Å¥</div>
            <div><span class="text-gray-400">I<sub>z</sub>:</span> <span id="prop-Iz" class="text-white font-mono">-</span> cm‚Å¥</div>
            <div><span class="text-gray-400">i<sub>y</sub>:</span> <span id="prop-iy" class="text-white font-mono">-</span> cm</div>
            <div><span class="text-gray-400">i<sub>z</sub>:</span> <span id="prop-iz" class="text-white font-mono">-</span> cm</div>
            <div><span class="text-gray-400">h:</span> <span id="prop-h" class="text-white font-mono">-</span> mm</div>
            <div><span class="text-gray-400">Curve y:</span> <span id="prop-curve-y" class="text-white font-mono">-</span></div>
            <div><span class="text-gray-400">Curve z:</span> <span id="prop-curve-z" class="text-white font-mono">-</span></div>
          </div>
        </div>
      </div>

      <!-- Section Classification -->
      <div class="bg-gray-800 rounded-lg p-3">
        <h2 class="text-base font-semibold text-white mb-1.5">Section Classification</h2>
        <div class="flex items-center justify-between">
          <p class="text-xs text-gray-400">
            Class 4 sections may experience local buckling. If allowed, effective (reduced) properties are used per EN 1993-1-5.
          </p>
          <div class="inline-flex flex-col">
            <label class="block text-xs font-medium text-gray-300 mb-1 text-right">Class 4 Sections</label>
            <div class="flex items-center gap-2">
              <span class="text-xs text-gray-300">Avoid</span>
              <label class="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" id="class4-toggle" class="sr-only peer" checked>
                <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-cyan-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
              </label>
              <span class="text-xs text-gray-300 whitespace-nowrap">Allow (eff. props)</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ULS Load Case -->
      <div class="bg-gray-800 rounded-lg p-3">
        <h2 class="text-base font-semibold text-white mb-1.5">ULS Load Case</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="NEd-ULS" class="block text-xs font-medium text-gray-300 mb-1">
              N<sub>Ed</sub> - Design axial force (kN)
            </label>
            <input
              type="text"
              id="NEd-ULS"
              class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500 font-mono"
              value="1000"
              placeholder="e.g. 1000"
              required>
            <p class="text-xs text-gray-400 mt-0.5">Positive = compression</p>
            <div id="NEd-ULS-calculated" class="calculated-value hidden"></div>
          </div>
        </div>
      </div>

      <!-- Fire Load Case -->
      <div class="bg-gray-800 rounded-lg p-3">
        <div class="flex items-center justify-between mb-1.5">
          <h2 class="text-base font-semibold text-white">Fire Design (Optional)</h2>
          <label class="flex items-center cursor-pointer">
            <input type="checkbox" id="fire-enabled" class="mr-1 w-4 h-4 text-cyan-600 bg-gray-700 border-gray-600 rounded focus:ring-cyan-500">
            <span class="text-gray-300 text-xs">Enable Fire Design</span>
          </label>
        </div>
        <div id="fire-inputs" class="hidden">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
            <div>
              <label for="NEd-fire" class="block text-xs font-medium text-gray-300 mb-1">
                N<sub>Ed,fi</sub> - Fire load (kN)
              </label>
              <input
                type="text"
                id="NEd-fire"
                class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500 font-mono"
                value="600"
                placeholder="e.g. 600">
              <div id="NEd-fire-calculated" class="calculated-value hidden"></div>
            </div>
            <div id="temperature-input-container" class="temperature-column">
              <label for="temperature" class="block text-xs font-medium text-gray-300 mb-1 temperature-visible">
                Œ∏ - Steel temperature (¬∞C)
              </label>
              <input
                type="number"
                id="temperature"
                class="w-full bg-gray-700 text-white border border-gray-600 rounded px-2 py-1.5 text-sm focus:outline-none focus:border-cyan-500 font-mono temperature-visible"
                value="500"
                min="20"
                max="1000"
                step="10">
            </div>
            <div class="flex items-end justify-end pb-1">
              <div class="inline-flex flex-col">
                <label class="block text-xs font-medium text-gray-300 mb-1 text-right">Temperature Mode</label>
                <div class="flex items-center gap-2">
                  <span class="text-xs text-gray-300">Specify Œ∏</span>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <input type="checkbox" id="fire-mode-toggle" class="sr-only peer">
                    <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-cyan-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-cyan-600"></div>
                  </label>
                  <span class="text-xs text-gray-300 whitespace-nowrap">Find Œ∏<sub>cr</sub></span>
                </div>
              </div>
              <!-- Hidden radio buttons for compatibility with existing JS -->
              <input type="radio" name="fire-mode" value="specify" class="hidden" checked>
              <input type="radio" name="fire-mode" value="find-critical" class="hidden">
            </div>
          </div>
        </div>
      </div>

      <style>
        /* Keep temperature column but hide content when in find-critical mode */
        .temperature-column .temperature-visible {
          display: block;
        }
        .temperature-column.find-critical .temperature-visible {
          visibility: hidden;
        }

        /* Calculated value display */
        .calculated-value {
          font-size: 0.75rem;
          color: #9ca3af;
          margin-top: 0.125rem;
          font-family: monospace;
        }
      </style>

      <script>
        // Sync toggle switch with hidden radio buttons
        document.getElementById('fire-mode-toggle')?.addEventListener('change', function(e) {
          const radios = document.getElementsByName('fire-mode');
          const tempContainer = document.getElementById('temperature-input-container');

          if (e.target.checked) {
            radios[1].checked = true; // find-critical
            tempContainer.classList.add('find-critical');
          } else {
            radios[0].checked = true; // specify
            tempContainer.classList.remove('find-critical');
          }
          // Trigger change event for existing JS listeners
          radios[0].dispatchEvent(new Event('change', { bubbles: true }));
          radios[1].dispatchEvent(new Event('change', { bubbles: true }));
        });

        // Function to evaluate and display calculated values for expression inputs
        function updateCalculatedValue(inputId) {
          const input = document.getElementById(inputId);
          const calcDisplay = document.getElementById(inputId + '-calculated');

          if (!input || !calcDisplay) return;

          const value = input.value.trim();

          // Check if it's an expression (contains operators)
          if (/[+\-*/()]/.test(value)) {
            try {
              // Use Function to safely evaluate (limited scope)
              const result = Function('"use strict"; return (' + value + ')')();
              if (!isNaN(result) && isFinite(result)) {
                calcDisplay.textContent = '= ' + result.toFixed(2);
                calcDisplay.classList.remove('hidden');
              } else {
                calcDisplay.classList.add('hidden');
              }
            } catch (e) {
              calcDisplay.classList.add('hidden');
            }
          } else {
            calcDisplay.classList.add('hidden');
          }
        }

        // Add event listeners to expression inputs
        ['Ly', 'Lz', 'NEd-ULS', 'NEd-fire'].forEach(id => {
          const input = document.getElementById(id);
          if (input) {
            input.addEventListener('input', () => updateCalculatedValue(id));
            input.addEventListener('blur', () => updateCalculatedValue(id));
            // Initial check
            updateCalculatedValue(id);
          }
        });

        // Keyboard shortcut: Ctrl+Enter to submit form
        document.addEventListener('keydown', function(e) {
          if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
            e.preventDefault();
            const form = document.getElementById('buckling-form');
            if (form) {
              form.requestSubmit();
            }
          }
        });
      </script>

      <!-- Calculate Buttons -->
      <div class="flex flex-col items-center gap-2">
        <button
          type="submit"
          id="calculate-btn"
          class="w-full max-w-xs px-6 py-2 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold rounded-lg transition shadow-lg">
          Calculate Buckling Capacity
        </button>
        <button
          type="button"
          id="find-lightest-btn"
          class="w-full max-w-xs px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
          disabled>
          Find Lightest Candidate
        </button>
        <div id="search-progress" class="hidden text-xs text-cyan-400"></div>
        <p class="text-xs text-gray-400">Press <kbd class="px-1.5 py-0.5 bg-gray-700 border border-gray-600 rounded text-xs font-mono">Ctrl+Enter</kbd> to calculate</p>
      </div>
    </form>

    <!-- Results Section -->
    <div id="results-section" class="mt-8 hidden">

      <!-- Section Classification Results -->
      <div id="classification-results" class="hidden bg-gray-800 rounded-lg p-4 mb-6">
        <h3 class="text-lg font-semibold text-white mb-3">Section Classification</h3>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-3">
          <div class="bg-gray-700 rounded p-3">
            <p class="text-xs text-gray-400 mb-1">Overall Class</p>
            <p class="text-2xl font-mono font-bold" id="section-class">-</p>
          </div>
          <div class="bg-gray-700 rounded p-3">
            <p class="text-xs text-gray-400 mb-1">Œµ = ‚àö(235/f<sub>y</sub>)</p>
            <p class="text-2xl font-mono text-white" id="epsilon-value">-</p>
          </div>
          <div class="bg-gray-700 rounded p-3">
            <p class="text-xs text-gray-400 mb-1">Governing Element</p>
            <p class="text-sm font-mono text-white" id="governing-element">-</p>
          </div>
          <div class="bg-gray-700 rounded p-3">
            <p class="text-xs text-gray-400 mb-1">Effective Area</p>
            <p class="text-sm font-mono text-white" id="effective-area-display">-</p>
          </div>
        </div>

        <!-- Detailed element classification (collapsible) -->
        <div class="mt-3">
          <button type="button" onclick="toggleClassificationDetails()"
                  class="text-sm text-cyan-400 hover:text-cyan-300 transition">
            <span id="classification-toggle-icon">‚ñ∂</span> Show element classification details
          </button>
          <div id="classification-details" class="hidden mt-2 overflow-x-auto">
            <table class="w-full text-xs">
              <thead class="bg-gray-700">
                <tr>
                  <th class="p-2 text-left">Element</th>
                  <th class="p-2 text-right">c (mm)</th>
                  <th class="p-2 text-right">t (mm)</th>
                  <th class="p-2 text-right">c/t</th>
                  <th class="p-2 text-right">Limit (Class 3)</th>
                  <th class="p-2 text-center">Class</th>
                </tr>
              </thead>
              <tbody id="classification-table-body" class="text-white">
                <!-- Populated dynamically -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Class 4 effective properties info (shown only if Class 4) -->
        <div id="class4-info" class="hidden mt-3 p-3 bg-blue-900 border border-blue-600 rounded">
          <p class="text-xs text-blue-100">
            <strong>Class 4 Section:</strong> Effective properties calculated per EN 1993-1-5.
            Area reduced by <span id="area-reduction-percent" class="font-mono">-</span>% to account for local buckling.
          </p>
        </div>
      </div>

      <!-- ULS Results -->
      <div class="bg-gray-800 rounded-lg p-6 mb-6">
        <h2 class="text-xl font-semibold text-white mb-4">ULS Results</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
          <div class="bg-gray-700 rounded p-4">
            <p class="text-sm text-gray-400 mb-1">Slenderness (y-axis)</p>
            <p class="text-2xl font-mono text-white" id="result-lambda-y">-</p>
          </div>
          <div class="bg-gray-700 rounded p-4">
            <p class="text-sm text-gray-400 mb-1">Slenderness (z-axis)</p>
            <p class="text-2xl font-mono text-white" id="result-lambda-z">-</p>
          </div>
          <div class="bg-gray-700 rounded p-4">
            <p class="text-sm text-gray-400 mb-1">Governing Axis</p>
            <p class="text-2xl font-mono text-white" id="result-governing-axis">-</p>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
          <div class="bg-gray-700 rounded p-4">
            <p class="text-sm text-gray-400 mb-1">œá<sub>y</sub> - Reduction factor (y)</p>
            <p class="text-2xl font-mono text-white" id="result-chi-y">-</p>
          </div>
          <div class="bg-gray-700 rounded p-4">
            <p class="text-sm text-gray-400 mb-1">œá<sub>z</sub> - Reduction factor (z)</p>
            <p class="text-2xl font-mono text-white" id="result-chi-z">-</p>
          </div>
          <div class="bg-gray-700 rounded p-4">
            <p class="text-sm text-gray-400 mb-1">œá<sub>min</sub> - Governing</p>
            <p class="text-2xl font-mono text-white" id="result-chi-min">-</p>
          </div>
        </div>
        <div class="bg-gradient-to-r from-gray-700 to-gray-600 rounded-lg p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <p class="text-sm text-gray-300 mb-1">N<sub>b,Rd</sub> - Buckling Resistance</p>
              <p class="text-4xl font-mono font-bold text-cyan-400" id="result-Nb-Rd">-</p>
            </div>
            <div>
              <p class="text-sm text-gray-300 mb-1">Utilization (N<sub>Ed</sub> / N<sub>b,Rd</sub>)</p>
              <p class="text-4xl font-mono font-bold" id="result-utilization-uls">-</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Fire Results -->
      <div id="fire-results" class="bg-gray-800 rounded-lg p-6 mb-6 hidden">
        <h2 class="text-xl font-semibold text-white mb-4">Fire Design Results</h2>

        <!-- Temperature Specified Mode Results -->
        <div id="fire-results-specify" class="hidden">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div class="bg-gray-700 rounded p-4">
              <p class="text-sm text-gray-400 mb-1">k<sub>y,Œ∏</sub> - Yield reduction</p>
              <p class="text-2xl font-mono text-white" id="result-k-y-theta">-</p>
            </div>
            <div class="bg-gray-700 rounded p-4">
              <p class="text-sm text-gray-400 mb-1">k<sub>E,Œ∏</sub> - Stiffness reduction</p>
              <p class="text-2xl font-mono text-white" id="result-k-E-theta">-</p>
            </div>
            <div class="bg-gray-700 rounded p-4">
              <p class="text-sm text-gray-400 mb-1">N<sub>b,fi,Rd</sub> (kN)</p>
              <p class="text-2xl font-mono text-white" id="result-Nb-fi-Rd">-</p>
            </div>
          </div>
          <div class="bg-gradient-to-r from-gray-700 to-gray-600 rounded-lg p-6">
            <p class="text-sm text-gray-300 mb-1">Utilization at Œ∏ = <span id="temp-display">-</span>¬∞C</p>
            <p class="text-4xl font-mono font-bold" id="result-utilization-fire">-</p>
          </div>
        </div>

        <!-- Find Critical Temperature Mode Results -->
        <div id="fire-results-critical" class="hidden">
          <div class="bg-gradient-to-r from-orange-900 to-red-900 rounded-lg p-6">
            <p class="text-sm text-gray-300 mb-1">Œ∏<sub>cr</sub> - Critical Temperature (Utilization = 100%)</p>
            <p class="text-5xl font-mono font-bold text-orange-300" id="result-critical-temp">-</p>
            <p class="text-sm text-gray-400 mt-2" id="critical-temp-message"></p>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div class="bg-gray-700 rounded p-4">
              <p class="text-sm text-gray-400 mb-1">k<sub>y,Œ∏</sub> at Œ∏<sub>cr</sub></p>
              <p class="text-2xl font-mono text-white" id="result-k-y-theta-crit">-</p>
            </div>
            <div class="bg-gray-700 rounded p-4">
              <p class="text-sm text-gray-400 mb-1">k<sub>E,Œ∏</sub> at Œ∏<sub>cr</sub></p>
              <p class="text-2xl font-mono text-white" id="result-k-E-theta-crit">-</p>
            </div>
            <div class="bg-gray-700 rounded p-4">
              <p class="text-sm text-gray-400 mb-1">N<sub>b,fi,Rd</sub> at Œ∏<sub>cr</sub> (kN)</p>
              <p class="text-2xl font-mono text-white" id="result-Nb-fi-Rd-crit">-</p>
            </div>
          </div>
        </div>
      </div>

      <!-- On-Screen Calculations -->
      <div class="bg-gray-800 rounded-lg p-6 mb-6">
        <h2 class="text-xl font-semibold text-white mb-4 cursor-pointer" onclick="toggleCalculations()">
          ‚ñº Detailed Calculations
        </h2>
        <div id="calculations-display" class="space-y-4 text-sm font-mono">
          <!-- Calculations will be populated here -->
        </div>
      </div>

      <!-- Detailed Report (wrapped in #results for print CSS) -->
      <div id="results">
        <div class="bg-gray-700 rounded-lg p-6 mt-6">
          <div class="flex justify-between items-center mb-3">
            <h3 class="text-lg font-semibold text-white cursor-pointer" onclick="toggleReport()">
              ‚ñº Detailed Calculation Report
            </h3>
            <button type="button" onclick="printReport()" class="px-4 py-2 bg-cyan-600 hover:bg-cyan-700 text-white text-sm font-semibold rounded-lg transition print:hidden">
              üñ®Ô∏è Print Report
            </button>
          </div>
          <div id="detailed-report" class="hidden mt-4">
            <!-- Report content will be generated here -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Centralized JavaScript -->
  <script src="../assets/js/common.js"></script>
  <script src="flexural_buckling_api.js"></script>
  <script src="flexural_buckling_ui.js"></script>

  <!-- Persistent Cookie Settings Button -->
  <button id="cookie-settings-btn"
          onclick="if(window.cookieConsent) { window.cookieConsent.showConsentBanner(); } else { document.getElementById('cookie-consent')?.classList.remove('hidden'); }"
          class="fixed bottom-3 left-3 z-40 bg-gray-800 hover:bg-gray-700 text-white rounded-lg shadow-lg border border-gray-600 transition-all duration-200 hover:scale-105"
          style="padding: 6px 10px; font-size: 11px;"
          title="Cookie Settings">
    <span class="hidden sm:inline">üç™ Cookies</span>
    <span class="sm:hidden">üç™</span>
  </button>
  <style>
    /* Mobile-specific adjustments for cookie button */
    @media (max-width: 640px) {
      #cookie-settings-btn {
        bottom: 8px !important;
        left: 8px !important;
        padding: 5px 8px !important;
        font-size: 16px !important;
      }
    }
    #cookie-settings-btn {
      pointer-events: auto;
      touch-action: manipulation;
      user-select: none;
    }
  </style>

  <!-- Cookie Consent Scripts -->
  <script src="../assets/js/cookie-consent.js"></script>
</body>
</html>
