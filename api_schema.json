{
  "structural_tools_api": {
    "version": "1.0.0",
    "description": "API schema for structural engineering calculation tools",
    "base_url": "https://api.structural-tools.com",
    "endpoints": {
      "concrete_beam": "/api/concrete-beam",
      "concrete_slab": "/api/concrete-slab",
      "concrete_beam_batch": "/api/concrete-beam/batch",
      "concrete_slab_batch": "/api/concrete-slab/batch"
    }
  },
  
  "concrete_beam": {
    "input_schema": {
      "type": "object",
      "required": ["geometry", "loads", "longitudinal_reinforcement", "shear_reinforcement", "material"],
      "properties": {
        "geometry": {
          "type": "object",
          "required": ["b", "h", "c"],
          "properties": {
            "b": {
              "type": "number",
              "description": "Beam width in mm",
              "minimum": 100,
              "maximum": 2000
            },
            "h": {
              "type": "number", 
              "description": "Beam height in mm",
              "minimum": 200,
              "maximum": 3000
            },
            "c": {
              "type": "number",
              "description": "Concrete cover in mm", 
              "minimum": 15,
              "maximum": 100
            }
          }
        },
        "loads": {
          "type": "object",
          "required": ["MEd", "VEd"],
          "properties": {
            "MEd": {
              "oneOf": [
                {"type": "number"},
                {"type": "string"}
              ],
              "description": "Applied moment in kNm (can be mathematical expression like '20*5^2/8')"
            },
            "VEd": {
              "oneOf": [
                {"type": "number"}, 
                {"type": "string"}
              ],
              "description": "Applied shear in kN (can be mathematical expression like '20*5/2')"
            }
          }
        },
        "longitudinal_reinforcement": {
          "type": "object",
          "required": ["phi_l", "n_l"],
          "properties": {
            "phi_l": {
              "type": "number",
              "description": "Longitudinal bar diameter in mm",
              "enum": [10, 12, 16, 20, 25, 32]
            },
            "n_l": {
              "type": "integer",
              "description": "Number of longitudinal bars",
              "minimum": 2,
              "maximum": 20
            }
          }
        },
        "shear_reinforcement": {
          "type": "object", 
          "required": ["phi_b", "cc_b", "n_snitt"],
          "properties": {
            "phi_b": {
              "type": "number",
              "description": "Stirrup diameter in mm",
              "enum": [6, 8, 10, 12, 16]
            },
            "cc_b": {
              "type": "number",
              "description": "Stirrup spacing in mm",
              "minimum": 50,
              "maximum": 600
            },
            "n_snitt": {
              "type": "integer",
              "description": "Number of stirrup legs",
              "minimum": 2,
              "maximum": 6
            }
          }
        },
        "material": {
          "type": "object",
          "required": ["fck", "fyk", "alpha_cc", "gamma_c", "gamma_s"],
          "properties": {
            "fck": {
              "type": "number",
              "description": "Concrete characteristic strength in MPa",
              "minimum": 12,
              "maximum": 90
            },
            "fyk": {
              "type": "number", 
              "description": "Steel characteristic strength in MPa",
              "minimum": 400,
              "maximum": 600
            },
            "alpha_cc": {
              "type": "number",
              "description": "Alpha cc factor",
              "minimum": 0.5,
              "maximum": 1.0,
              "default": 0.85
            },
            "gamma_c": {
              "type": "number",
              "description": "Concrete safety factor", 
              "minimum": 1.0,
              "maximum": 2.0,
              "default": 1.5
            },
            "gamma_s": {
              "type": "number",
              "description": "Steel safety factor",
              "minimum": 1.0, 
              "maximum": 1.5,
              "default": 1.25
            }
          }
        }
      }
    },
    
    "output_schema": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean",
          "description": "Whether calculation was successful"
        },
        "inputs": {
          "type": "object",
          "description": "Processed input values"
        },
        "intermediate_calculations": {
          "type": "object",
          "properties": {
            "geometry": {
              "type": "object",
              "properties": {
                "d": {"type": "number", "description": "Effective depth in mm"},
                "Asl": {"type": "number", "description": "Longitudinal steel area in mm²"},
                "z": {"type": "number", "description": "Lever arm in mm"}
              }
            },
            "material": {
              "type": "object", 
              "properties": {
                "fcd": {"type": "number", "description": "Design concrete strength in MPa"},
                "fyd": {"type": "number", "description": "Design steel strength in MPa"}
              }
            },
            "shear": {
              "type": "object",
              "properties": {
                "Asw": {"type": "number", "description": "Shear reinforcement area in mm²"},
                "z_v": {"type": "number", "description": "Shear lever arm in mm"},
                "cot_theta_final": {"type": "number", "description": "Final cot(θ) value"},
                "angle_status": {"type": "string", "description": "Angle check status"}
              }
            }
          }
        },
        "results": {
          "type": "object",
          "properties": {
            "moment_capacity": {
              "type": "object",
              "properties": {
                "MRd_c": {"type": "number", "description": "Concrete moment capacity in kNm"},
                "MRd_s": {"type": "number", "description": "Steel moment capacity in kNm"},
                "MRd": {"type": "number", "description": "Design moment capacity in kNm"}
              }
            },
            "shear_capacity": {
              "type": "object",
              "properties": {
                "VRd_s": {"type": "number", "description": "Design shear capacity in kN"}
              }
            },
            "tensile_force": {
              "type": "object", 
              "properties": {
                "F_Ed": {"type": "number", "description": "Design tensile force in kN"},
                "F_Rd": {"type": "number", "description": "Tensile resistance in kN"}
              }
            }
          }
        },
        "status": {
          "type": "object",
          "properties": {
            "overall": {
              "type": "string",
              "enum": ["OK", "HIGH_UTILIZATION", "FAILED"],
              "description": "Overall design status"
            },
            "messages": {
              "type": "array",
              "items": {"type": "string"},
              "description": "Status messages and recommendations"
            },
            "utilizations": {
              "type": "object",
              "properties": {
                "moment": {"type": "number", "description": "Moment utilization percentage"},
                "shear": {"type": "number", "description": "Shear utilization percentage"}, 
                "tensile": {"type": "number", "description": "Tensile utilization percentage"}
              }
            }
          }
        }
      }
    }
  },
  
  "concrete_slab": {
    "input_schema": {
      "type": "object",
      "required": ["geometry", "material", "reinforcement"],
      "properties": {
        "geometry": {
          "type": "object",
          "required": ["MEd", "t", "c"],
          "properties": {
            "MEd": {
              "oneOf": [
                {"type": "number"},
                {"type": "string"}
              ],
              "description": "Applied moment in kNm (can be mathematical expression)"
            },
            "t": {
              "type": "number",
              "description": "Slab thickness in mm",
              "minimum": 100,
              "maximum": 500
            },
            "c": {
              "type": "number", 
              "description": "Concrete cover in mm",
              "minimum": 15,
              "maximum": 75
            }
          }
        },
        "material": {
          "type": "object",
          "required": ["fcd", "fyd"],
          "properties": {
            "fcd": {
              "type": "number",
              "description": "Design concrete strength in MPa",
              "minimum": 5,
              "maximum": 50
            },
            "fyd": {
              "type": "number",
              "description": "Design steel strength in MPa", 
              "minimum": 300,
              "maximum": 600
            }
          }
        },
        "reinforcement": {
          "type": "object",
          "required": ["phi_l", "cc_l"],
          "properties": {
            "phi_l": {
              "type": "number",
              "description": "Bar diameter in mm",
              "enum": [6, 8, 10, 12, 16, 20]
            },
            "cc_l": {
              "type": "number",
              "description": "Bar spacing in mm",
              "minimum": 50,
              "maximum": 500
            }
          }
        }
      }
    },
    
    "output_schema": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean",
          "description": "Whether calculation was successful"
        },
        "inputs": {
          "type": "object",
          "description": "Processed input values"
        },
        "intermediate_calculations": {
          "type": "object",
          "properties": {
            "geometry": {
              "type": "object",
              "properties": {
                "d": {"type": "number", "description": "Effective depth in mm"}
              }
            },
            "reinforcement": {
              "type": "object",
              "properties": {
                "As": {"type": "number", "description": "Steel area per meter in mm²/m"}
              }
            },
            "lever_arm": {
              "type": "object",
              "properties": {
                "z": {"type": "number", "description": "Lever arm in mm"}
              }
            }
          }
        },
        "results": {
          "type": "object",
          "properties": {
            "moment_capacity": {
              "type": "object",
              "properties": {
                "MRd_c": {"type": "number", "description": "Concrete moment capacity in kNm"},
                "MRd_s": {"type": "number", "description": "Steel moment capacity in kNm"},
                "MRd": {"type": "number", "description": "Design moment capacity in kNm"},
                "governing": {"type": "string", "enum": ["concrete", "steel"], "description": "Governing capacity"}
              }
            }
          }
        },
        "status": {
          "type": "object",
          "properties": {
            "overall": {
              "type": "string", 
              "enum": ["OK", "HIGH_UTILIZATION", "FAILED"],
              "description": "Overall design status"
            },
            "messages": {
              "type": "array",
              "items": {"type": "string"},
              "description": "Status messages and recommendations"
            },
            "utilization": {
              "type": "number",
              "description": "Moment utilization percentage"
            }
          }
        }
      }
    }
  },
  
  "examples": {
    "concrete_beam_request": {
      "geometry": {
        "b": 250,
        "h": 500, 
        "c": 25
      },
      "loads": {
        "MEd": "20*5^2/8",
        "VEd": "20*5/2" 
      },
      "longitudinal_reinforcement": {
        "phi_l": 20,
        "n_l": 2
      },
      "shear_reinforcement": {
        "phi_b": 12,
        "cc_b": 185,
        "n_snitt": 2
      },
      "material": {
        "fck": 35,
        "fyk": 500,
        "alpha_cc": 0.85,
        "gamma_c": 1.5,
        "gamma_s": 1.25
      }
    },
    
    "concrete_slab_request": {
      "geometry": {
        "MEd": "20*5^2/8",
        "t": 200,
        "c": 35
      },
      "material": {
        "fcd": 19.8,
        "fyd": 435
      },
      "reinforcement": {
        "phi_l": 12,
        "cc_l": 200
      }
    }
  }
}